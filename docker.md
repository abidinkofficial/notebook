# Docker: cheatsheet tadÄ±nda
## âš  Template, work in progress
## Why did the Docker appear?

Let's assume that we need to run two applications in isolation from each other.

#### ðŸ–¥ Bare-metal

```server = linux + libraries + app #1```

```server = linux + libraries + app #2```

#### ðŸ’½ Virtualization
  
```server = hypervisor + [ linux + libraries + app #1 ] + [ linux + libraries + app #2 ]```

#### ðŸ“¦ Container (thanks to namespaces and control groups)
  
```server = linux + [ libraries + app #1 ] + [ libraries + app #2 ]```
  
*The containers looks good but they are very difficult to manage.*

#### ðŸ³ Docker
  
```server = linux + docker + [ libraries + app #1 ] + [ libraries + app #2 ]```

*The docker layer makes things easier. Libraries in the docker may consists a linux distro without a kernel.*

## Docker Engine
```Docker Engine``` = ```Docker CLI``` + ```Docker REST API``` + ```Docker Daemon```

## Image and Container
**Image:** Application template

**Container:** Running application instance from the image

```Application Image``` -> ```Running Application Container #1```, ```Running Application Container #2```, ```...```

## Volume
A volume is a persistent data stored in `/var/lib/docker/volumes/...`

They preserve the data generated by the running container.

## Docker CLI

### Try the Docker and get help
```bash
# list all available commands
docker --help

# check the docker version
docker version

# try the docker and run a hello-world
docker container run hello-world
```
### List images and containers
```bash
# list installed images
docker image ls

# list running containers
docker container ls

# list all containers including stopped ones
docker container ls -a
```
### Start a container from an image
```bash
docker container run $IMAGE

# give a name to the container
docker container run --name $CONTAINER_NAME $IMAGE

# start without connecting to the shell
docker container run -d $IMAGE
```
### Start an existing container
```bash
docker container start $CONTAINER

# and attach it to the shell
docker container start $CONTAINER -a
```
### Stop a container
```bash
docker container stop $CONTAINER
```
### Remove a container
```bash
# if the container is not running
docker container rm $CONTAINER

# force a container to stop and delete it
docker container rm -f $CONTAINER

# remove all containers
docker container prune
```
### Remove an image
```bash
docker image rm $IMAGE

# remove all images
docker image prune -a
```
### Connect to a container and manage it
```bash
# connect to it via shell
docker container exec -it $CONTAINER sh

# or
docker container exec -it $CONTAINER bash

# or
docker container exec -it $CONTAINER powershell

# disconnect from the container's shell
exit
```
### Volume commands
```bash
# create a volume
docker volume create $VOLUME_NAME

# inspect a volume
docker volume inspect $VOLUME_NAME

# run a container while connecting it to a volume
docker container run -it -v $VOLUME_NAME:/$VOLUME_LOCATION $IMAGE sh

# run a container while connecting it to a volume but read only
docker container run -it -v $VOLUME_NAME:/$VOLUME_LOCATION:ro $IMAGE sh
```